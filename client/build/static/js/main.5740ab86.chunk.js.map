{"version":3,"sources":["components/AppEventStore.js","components/ImageUploadComponent.js","components/DownloadImageComponent.js","components/EditorComponent.js","components/AppReducer.js","components/StateProvider.js","App.js","reportWebVitals.js","index.js"],"names":["store","this","events","eventName","data","event","forEach","fn","call","push","filter","eventFn","ImageUploadComponent","props","className","type","onChange","ev","f","target","files","fr","FileReader","onload","ev2","emit","result","readAsDataURL","DownloadImageComponent","newlyDrawnRectangle","origX","origY","onClick","fabricEditor","original_image","undefined","blured_image","blured_sections","shouldDrawRect","fabric","Image","filters","Blur","blur","zoom_to_fit_selected_image","img","cw","getWidth","ch","getHeight","imgw","width","imgh","height","zoom","opt","e","preventDefault","stopPropagation","zoomToPoint","x","offsetX","y","offsetY","setZoom","renderAll","set_zoom_of_editor","Math","min","update_scale_pos","blured_clone","options","cropX","transform","left","cropY","top","scaleX","scaleY","blureSection","remove","add","set","selectable","hoverCursor","util","object","clone","opacity","applyFilters","bringToFront","visible","EditorComponent","resizeCanvas","setDimensions","window","innerWidth","innerHeight","console","log","getZoom","useEffect","Canvas","textureSize","subscribe","img_base64","toDataURL","format","quality","a","document","createElement","href","download","click","dowload_image","fromURL","oImg","addEventListener","on","no_selected_obj","getActiveObjects","length","pointer","getPointer","within_rect","imgW","imgH","check_mouse_within_image_rect","Rect","originX","originY","angle","fill","transparentCorners","o","mX","mY","max","abs","w","h","objectCaching","add_blured_selection","crossOrigin","id","state","action","selectedImage","payload","shoppingList","item","initialState","GlobalContext","createContext","GlobalProvider","children","useReducer","AppReducer","dispatch","Provider","value","addItemToList","removeItemFromList","change_loaded_image","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"wRA6BMA,EAAQ,IA3Bd,WACI,aAAe,oBACbC,KAAKC,OAAS,GAFpB,wCAKI,SAAKC,EAAWC,GACd,IAAMC,EAAQJ,KAAKC,OAAOC,GACtBE,GACFA,EAAMC,SAAQ,SAAAC,GACZA,EAAGC,KAAK,KAAMJ,QATxB,uBAcI,SAAUD,EAAWI,GAAK,IAAD,OAMvB,OALIN,KAAKC,OAAOC,KACdF,KAAKC,OAAOC,GAAa,IAG3BF,KAAKC,OAAOC,GAAWM,KAAKF,GACrB,WACL,EAAKL,OAAOC,GAAa,EAAKD,OAAOC,GAAWO,QAAO,SAAAC,GAAO,OAAIJ,IAAOI,UArBjF,M,OCqBeC,MApBf,SAA8BC,GAY1B,OACI,sBAAKC,UAAU,qBAAf,UACI,wBAAQA,UAAU,MAAlB,6BACA,uBAAOC,KAAK,OAAOC,SAbI,SAACC,GAC5B,IAAIC,EAAID,EAAGE,OAAOC,MAAM,GACpBC,EAAK,IAAIC,WAEbD,EAAGE,OAAS,SAACC,GAETxB,EAAMyB,KAAK,gBAAgBD,EAAIL,OAAOO,SAE1CL,EAAGM,cAAcT,UCEVU,ICJXC,EAAqBC,EAAOC,EDIjBH,EAZf,SAAgCf,GAK5B,OACI,qBAAKC,UAAU,uBAAf,SACI,wBAAQA,UAAU,MAAMkB,QALT,SAACf,GACpBjB,EAAMyB,KAAK,iBAAiB,KAIxB,iCCJRQ,EAAe,GACfC,OAAiBC,EACjBC,OAAeD,EACfE,EAAkB,GAClBC,GAAiB,EAEjB5B,EAAS,IAAI6B,SAAOC,MAAMC,QAAQC,KAAK,CACvCC,KAAM,KAqBV,SAASC,EAA2BC,GAChC,QAAWV,IAARU,EAAH,CAGA,IAAIC,EAAKb,EAAac,WAClBC,EAAKf,EAAagB,YAClBC,EAAOL,EAAIM,MACXC,EAAOP,EAAIQ,QA2CnB,SAA4BC,GAA2B,IAAtBC,EAAqB,uDAAjB,KAEtB,OAARA,GACCA,EAAIC,EAAEC,iBACNF,EAAIC,EAAEE,kBACNzB,EAAa0B,YAAY,CAAEC,EAAGL,EAAIC,EAAEK,QAASC,EAAGP,EAAIC,EAAEO,SAAWT,IAGjErB,EAAa+B,QAAQV,GAEzBrB,EAAagC,YAlDbC,CAFWC,KAAKC,IAAIpB,EAAKI,EAAMN,EAAKI,GAEZ,KAAK,OA8BjC,IAAMmB,EAAmB,SAACC,EAAaC,GACnCD,EAAaE,MAAQD,EAAQE,UAAUtD,OAAOuD,KAC9CJ,EAAaK,MAASJ,EAAQE,UAAUtD,OAAOyD,IAC/CN,EAAanB,OAASmB,EAAaO,OACnCP,EAAajB,QAAUiB,EAAaQ,OACpCR,EAAaO,OAAS,EACtBP,EAAaQ,OAAS,GAiB1B,IAAMC,EAAe,WAA4B,IAAZlC,EAAW,uDAAP,UACfV,IAAnBD,IAECD,EAAa+C,OAAO9C,GACpBD,EAAa+C,OAAO5C,IAGxBF,EAAiBW,EACjBZ,EAAagD,IAAI/C,GAEjBU,EAA2BC,GAC3BX,EAAegD,IAAI,CAACC,YAAY,EAAMC,YAAa,WAEnDhD,EAAeG,SAAO8C,KAAKC,OAAOC,MAAM1C,IAC3BqC,IAAI,CAACM,QAAQ,EAAEL,YAAY,IACxC/C,EAAaK,QAAQhC,KAAKC,GAC1B0B,EAAaqD,eACbxD,EAAagD,IAAI7C,GACjBA,EAAasD,eACbtD,EAAa8C,IAAI,CAACS,SAAQ,EAAMR,YAAW,KAwHhCS,MApHf,SAAyB/E,GAKrB,IAAMgF,EAAe,WACjB5D,EAAa6D,cAAc,CACvB3C,MAAO4C,OAAOC,WACd3C,OAAQ0C,OAAOE,cAEnBC,QAAQC,IAAIlE,EAAamE,WACzBxD,EAA2BV,GAC3BD,EAAagC,aA4FjB,OA1FAoC,qBAAU,WAqFN,OApFApE,EAAe,IAAIM,SAAO+D,OAAO,iBAEjC/D,SAAOgE,YAAc,QACrBV,IAEA7F,EAAMwG,UAAU,kBAAiB,SAACpG,IA3H1C,WACI,IAAIqG,EAAaxE,EAAayE,UAAU,CACpCC,OAAQ,MACRC,QAAS,EACThC,IAAI,EACJF,KAAK,EACLvB,MAAOjB,EAAeiB,MAAQjB,EAAe2C,OAAS5C,EAAamE,UACnE/C,OAAQnB,EAAemB,OAASnB,EAAe4C,OAAU7C,EAAamE,YAGtES,EAAIC,SAASC,cAAc,KAC/BF,EAAEG,KAAO,kBAAoBP,EAC7BI,EAAEI,SAAW,0BACbJ,EAAEK,QA+GMC,MAEJnH,EAAMwG,UAAU,iBAAgB,SAACpG,GAC7BmC,SAAOC,MAAM4E,QAAQhH,GAAM,SAASyC,GAChC,IAAIwE,EAAOxE,EAAIqC,IAAI,CAAER,KAAM,EAAGE,IAAK,EAAEY,QAAS,EAAGL,YAAY,IAC7DJ,EAAa,EAAE,EAAEsC,SAGzBtB,OAAOuB,iBAAiB,SAAUzB,GAAc,GAChD5D,EAAasF,GAAG,cAAa,SAAS/D,GAElC,IAAIgE,EAA6D,GAA1CvF,EAAawF,mBAAmBC,OACnDC,EAAU1F,EAAa2F,WAAWpE,EAAEA,GACpCqE,EAnFhB,SAAuCC,EAAKC,EAAKJ,GAC7C,OAAOA,EAAQ/D,GAAKkE,GAAQH,EAAQ7D,GAAIiE,EAkFdC,CAA8B9F,EAAeiB,MAC3DjB,EAAemB,OACfsE,GAGJ,GAFArF,EAAiBkF,GAAmBK,EAEpC,CACA/F,EAAQ6F,EAAQ/D,EAChB7B,EAAQ4F,EAAQ7D,EACZ6D,EAAU1F,EAAa2F,WAAWpE,EAAEA,GACxC3B,EAAsB,IAAIU,SAAO0F,KAAK,CAClCvD,KAAM5C,EACN8C,IAAK7C,EACLmG,QAAS,OACTC,QAAS,MACThF,MAAOwE,EAAQ/D,EAAE9B,EACjBuB,OAAQsE,EAAQ7D,EAAE/B,EAClBqG,MAAO,EACPC,KAAM,oBACNC,oBAAoB,IAExBrG,EAAagD,IAAIpD,OAGrBI,EAAasF,GAAG,cAAa,SAASgB,GAClC,GAAKjG,EAAL,CACA,IAAIqF,EAAU1F,EAAa2F,WAAWW,EAAE/E,GAGpCN,EAAOhB,EAAeiB,MACtBC,EAAOlB,EAAemB,OACtBmF,EAAKrE,KAAKC,IAAIuD,EAAQ/D,EAAEV,GACxBuF,EAAKtE,KAAKC,IAAIuD,EAAQ7D,EAAEV,GAEzBtB,EAAM6F,EAAQ/D,GACb/B,EAAoBqD,IAAI,CAAER,KAAMP,KAAKuE,IAAI,EAAEF,KAE5CzG,EAAM4F,EAAQ7D,GACbjC,EAAoBqD,IAAI,CAAEN,IAAKT,KAAKuE,IAAI,EAAED,KAG9C5G,EAAoBqD,IAAI,CAAE/B,MAAOgB,KAAKwE,IAAI7G,EAAQ0G,KAClD3G,EAAoBqD,IAAI,CAAE7B,OAAQc,KAAKwE,IAAI5G,EAAQ0G,KAGnDxG,EAAagC,gBAGjBhC,EAAasF,GAAG,YAAY,SAASgB,QAENpG,IAAxBN,GAAqD,GAAhBS,KA1JpD,SAA8BsB,EAAEE,EAAE8E,EAAEC,GAEhC3C,QAAQC,IAAIvC,EAAEE,EAAE8E,EAAEC,GAClB,IAAIvE,EAAe/B,SAAO8C,KAAKC,OAAOC,MAAMnD,GAC5CkC,EAAaE,MAAQZ,EACrBU,EAAaK,MAAQb,EACrBQ,EAAanB,MAAQyF,EACrBtE,EAAajB,OAASwF,EACtBvE,EAAawE,eAAgB,EAC7B7G,EAAagD,IAAIX,GACjBA,EAAaoB,eACbpB,EAAaY,IAAI,CAACN,IAAId,EAAEY,KAAKd,EAAG+B,SAAQ,EAAKR,YAAW,IACxDb,EAAaiD,GAAG,UAAU,SAAUhD,GAChCF,EAAiBC,EAAaC,MAGlCD,EAAaiD,GAAG,WAAW,SAAUhD,GACjCF,EAAiBC,EAAaC,MAElClC,EAAgB5B,KAAK6D,GAwITyE,CAAqBlH,EAAoB6C,KAAK7C,EAAoB+C,IAC9D/C,EAAoBsB,MACpBtB,EAAoBwB,QAExBpB,EAAa+C,OAAOnD,GACpBS,GAAiB,EACjBT,OAAsBM,MAG9BI,SAAOC,MAAM4E,QAAQ,0BAA0B,SAAUvE,GACrD,IAAIwE,EAAOxE,EAAIqC,IAAI,CAAER,KAAM,EAAGE,IAAK,EAAEY,QAAS,EAAGL,YAAY,IAC7DJ,EAAa,EAAE,EAAEsC,KAClB,CACC2B,YAAa,cAEV,WACH9C,QAAQC,IAAI,2BAElB,IAGE,sBAAKrF,UAAU,iBAAf,UACI,sBAAKA,UAAU,UAAf,UACI,cAAC,EAAD,IACA,cAAC,EAAD,OAEJ,qBAAKA,UAAU,wBAAf,SACA,wBAAQmI,GAAG,wB,gBCtOR,WAACC,EAAOC,GACpB,OAAOA,EAAOpI,MACV,IAAK,eAEJ,OADGmF,QAAQC,IAAIgD,GACR,CACHC,cAAeD,EAAOE,SAE3B,IAAK,WACD,MAAO,CACCC,aAAa,CAAEH,EAAOE,SAAV,mBAAsBH,EAAMI,gBAEpD,IAAK,cACD,MAAO,CACHA,aAAcJ,EAAMI,aAAa5I,QAAO,SAAA6I,GAAI,OAAIA,IAASJ,EAAOE,YAExE,QACI,OAAOH,ICdZM,EAAe,CAClBF,aAAe,GACfF,mBAAejH,GAGLsH,EAAgBC,wBAAcF,GAE9BG,EAAiB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAC9B,EAA0BC,qBAAWC,EAAYN,GAAjD,mBAAON,EAAP,KAAca,EAAd,KAwBA,OACG,cAACN,EAAcO,SAAf,CAAwBC,MAAS,CAC/Bb,cAAgBF,EAAME,cACtBE,aAAeJ,EAAMI,aACvBY,cAxBH,SAAuBX,GACnBQ,EAAS,CACLhJ,KAAM,WACNsI,QAASE,KAqBCY,mBAlBlB,SAA4BZ,GACxBQ,EAAS,CACLhJ,KAAM,cACNsI,QAASE,KAeoBa,oBAXrC,SAA6BvH,GACxBkH,EAAS,CACLhJ,KAAM,eACNsI,QAASxG,MAKf,SAIG+G,KC1BMS,MAVf,WACE,OACK,qBAAKvJ,UAAU,MAAf,SACC,cAAC,EAAD,UACI,cAAC,EAAD,SCIGwJ,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCAdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFnE,SAASoE,eAAe,SAM1BZ,M","file":"static/js/main.5740ab86.chunk.js","sourcesContent":[" \r\n\r\nexport class EventEmitter {\r\n    constructor() {\r\n      this.events = {};\r\n    }\r\n    \r\n    emit(eventName, data) {\r\n      const event = this.events[eventName];\r\n      if( event ) {\r\n        event.forEach(fn => {\r\n          fn.call(null, data);\r\n        });\r\n      }\r\n    }\r\n    \r\n    subscribe(eventName, fn) {\r\n      if(!this.events[eventName]) {\r\n        this.events[eventName] = [];\r\n      }\r\n      \r\n      this.events[eventName].push(fn);\r\n      return () => {\r\n        this.events[eventName] = this.events[eventName].filter(eventFn => fn !== eventFn);\r\n      }\r\n    }\r\n   \r\n  }\r\n\r\nconst store = new EventEmitter()\r\nexport {store};","import React from 'react';\r\n import {store} from './AppEventStore'\r\n\r\nfunction ImageUploadComponent(props) {\r\n    \r\n    const file_selection_changed = (ev)=>{\r\n        var f = ev.target.files[0];\r\n        var fr = new FileReader();\r\n    \r\n        fr.onload = (ev2)=>{\r\n            \r\n            store.emit('image_changed',ev2.target.result)\r\n        };\r\n        fr.readAsDataURL(f);\r\n    }\r\n    return (\r\n        <div className=\"upload-btn-wrapper\">\r\n            <button className=\"btn\">Incarca imagine</button>\r\n            <input type=\"file\" onChange = {file_selection_changed}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImageUploadComponent;    ","import React from 'react';\r\n import {store} from './AppEventStore'\r\n\r\nfunction DownloadImageComponent(props) {\r\n    \r\n    const download_image = (ev)=>{\r\n        store.emit('download_image',{})\r\n    }\r\n    return (\r\n        <div className=\"download-btn-wrapper\">\r\n            <button className=\"btn\" onClick={download_image}>Descarca imagine</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DownloadImageComponent; ","import React, {useEffect,useContext}from 'react';\r\nimport {fabric} from 'fabric'\r\nimport ImageUploadComponent from './ImageUploadComponent'\r\nimport DownloadImageComponent from './DownloadImageComponent'\r\nimport {store} from './AppEventStore'\r\n\r\nlet fabricEditor = {}\r\nlet original_image = undefined\r\nlet blured_image = undefined\r\nlet blured_sections = []\r\nlet shouldDrawRect = false\r\nlet newlyDrawnRectangle, origX, origY,webGLBackend = undefined\r\nvar filter = new fabric.Image.filters.Blur({\r\n    blur: 0.3\r\n});\r\n\r\n\r\nfunction dowload_image(){\r\n    var img_base64 = fabricEditor.toDataURL({\r\n        format: \"png\",\r\n        quality: 1,\r\n        top:0,\r\n        left:0,\r\n        width: original_image.width * original_image.scaleX * fabricEditor.getZoom(),\r\n        height: original_image.height * original_image.scaleY  * fabricEditor.getZoom()\r\n        })\r\n  \r\n    var a = document.createElement(\"a\"); //Create <a>\r\n    a.href = \"data:image/png;\" + img_base64; //Image Base64 Goes here\r\n    a.download = \"Blurez_image_output.png\"; //File name Here\r\n    a.click(); //Downloaded file\r\n    //document.removeChild(a);\r\n    \r\n}\r\nfunction zoom_to_fit_selected_image(img){\r\n    if(img === undefined){\r\n        return\r\n    } \r\n    let cw = fabricEditor.getWidth()\r\n    let ch = fabricEditor.getHeight()\r\n    let imgw = img.width \r\n    let imgh = img.height \r\n    let zoom = Math.min(ch / imgh, cw / imgw);\r\n\r\n    set_zoom_of_editor(zoom,null,null)\r\n\r\n}\r\n\r\n\r\nfunction add_blured_selection(x,y,w,h){\r\n    \r\n    console.log(x,y,w,h)\r\n    let blured_clone = fabric.util.object.clone(blured_image);\r\n    blured_clone.cropX = x;\r\n    blured_clone.cropY = y;\r\n    blured_clone.width = w; // Default\r\n    blured_clone.height = h; // Default\r\n    blured_clone.objectCaching = false;\r\n    fabricEditor.add(blured_clone);\r\n    blured_clone.bringToFront();\r\n    blured_clone.set({top:y,left:x, visible:true,selectable:true});\r\n    blured_clone.on('moving', function (options) {\r\n        update_scale_pos(blured_clone,options)\r\n    });\r\n    \r\n    blured_clone.on('scaling', function (options) {\r\n        update_scale_pos(blured_clone,options)\r\n    })\r\n    blured_sections.push(blured_clone);\r\n\r\n}\r\nfunction check_mouse_within_image_rect(imgW,imgH,pointer){\r\n    return pointer.x <= imgW && pointer.y <=imgH;\r\n}\r\nconst update_scale_pos = (blured_clone,options)=>{\r\n    blured_clone.cropX = options.transform.target.left\r\n    blured_clone.cropY =  options.transform.target.top\r\n    blured_clone.width *= blured_clone.scaleX;\r\n    blured_clone.height*=  blured_clone.scaleY;\r\n    blured_clone.scaleX = 1\r\n    blured_clone.scaleY = 1\r\n}\r\n\r\n\r\nfunction set_zoom_of_editor(zoom,opt=null,offset=null){\r\n     \r\n    if(opt !== null){\r\n        opt.e.preventDefault();\r\n        opt.e.stopPropagation();\r\n        fabricEditor.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);\r\n    }\r\n    else {\r\n        fabricEditor.setZoom(zoom);\r\n    }\r\n    fabricEditor.renderAll();\r\n}\r\n\r\nconst blureSection = (left=0, top=0, img=null)=>{\r\n    if(original_image !== undefined)\r\n    {\r\n        fabricEditor.remove(original_image)\r\n        fabricEditor.remove(blured_image)\r\n    }\r\n    \r\n    original_image = img \r\n    fabricEditor.add(original_image)\r\n    \r\n    zoom_to_fit_selected_image(img)\r\n    original_image.set({selectable: false,hoverCursor: \"arrow\"});\r\n    \r\n    blured_image = fabric.util.object.clone(img);\r\n    blured_image.set({opacity:1,selectable: false});\r\n    blured_image.filters.push(filter);\r\n    blured_image.applyFilters();\r\n    fabricEditor.add(blured_image);\r\n    blured_image.bringToFront();\r\n    blured_image.set({visible:false,selectable:false});\r\n    \r\n}\r\n\r\nfunction EditorComponent(props) {\r\n      \r\n   \r\n\r\n   \r\n    const resizeCanvas = ()=>{        \r\n        fabricEditor.setDimensions({\r\n            width: window.innerWidth,\r\n            height: window.innerHeight\r\n        });\r\n        console.log(fabricEditor.getZoom())\r\n        zoom_to_fit_selected_image(original_image)\r\n        fabricEditor.renderAll();\r\n    }\r\n    useEffect(()=>{\r\n        fabricEditor = new fabric.Canvas('canvas_editor');\r\n        //fabric.filterBackend = new fabric.WebglFilterBackend()\r\n        fabric.textureSize = 6552236;\r\n        resizeCanvas()\r\n        \r\n        store.subscribe('download_image',(data)=>{\r\n            dowload_image();\r\n        })\r\n        store.subscribe('image_changed',(data)=>{\r\n            fabric.Image.fromURL(data, function(img) {\r\n                var oImg = img.set({ left: 0, top: 0,opacity: 1, selectable: true});\r\n                blureSection(0,0,oImg)       \r\n            });\r\n        })\r\n        window.addEventListener('resize', resizeCanvas, false);\r\n        fabricEditor.on(\"mouse:down\",function(e){\r\n            \r\n            let no_selected_obj =  fabricEditor.getActiveObjects().length == 0;\r\n            var pointer = fabricEditor.getPointer(e.e)\r\n            let within_rect = check_mouse_within_image_rect(original_image.width,\r\n                original_image.height,\r\n                pointer)\r\n            shouldDrawRect = no_selected_obj && within_rect\r\n            \r\n            if(!shouldDrawRect) return\r\n            origX = pointer.x\r\n            origY = pointer.y\r\n            var pointer = fabricEditor.getPointer(e.e);\r\n            newlyDrawnRectangle = new fabric.Rect({\r\n                left: origX,\r\n                top: origY,\r\n                originX: 'left',\r\n                originY: 'top',\r\n                width: pointer.x-origX,\r\n                height: pointer.y-origY,\r\n                angle: 0,\r\n                fill: 'rgba(255,0,0,0.5)',\r\n                transparentCorners: false\r\n            });\r\n            fabricEditor.add(newlyDrawnRectangle);\r\n\r\n        })\r\n        fabricEditor.on('mouse:move',function(o){\r\n            if (!shouldDrawRect) return;\r\n            var pointer = fabricEditor.getPointer(o.e);\r\n            \r\n            // need to clamp the size of the border to the withd of the intial loaded image \r\n            let imgw = original_image.width;\r\n            let imgh = original_image.height;\r\n            let mX = Math.min(pointer.x,imgw)\r\n            let mY = Math.min(pointer.y,imgh)\r\n\r\n            if(origX>pointer.x){\r\n                newlyDrawnRectangle.set({ left: Math.max(0,mX) });\r\n            }\r\n            if(origY>pointer.y){\r\n                newlyDrawnRectangle.set({ top: Math.max(0,mY) });\r\n            }\r\n            \r\n            newlyDrawnRectangle.set({ width: Math.abs(origX - mX) });\r\n            newlyDrawnRectangle.set({ height: Math.abs(origY - mY) });\r\n            \r\n            \r\n            fabricEditor.renderAll();\r\n        })\r\n         \r\n        fabricEditor.on('mouse:up', function(o){\r\n            \r\n            if(newlyDrawnRectangle !== undefined && shouldDrawRect==true){ \r\n                add_blured_selection(newlyDrawnRectangle.left,newlyDrawnRectangle.top,\r\n                    newlyDrawnRectangle.width,\r\n                    newlyDrawnRectangle.height)\r\n                    \r\n                fabricEditor.remove(newlyDrawnRectangle)\r\n                shouldDrawRect = false;\r\n                newlyDrawnRectangle = undefined;\r\n            }\r\n        });\r\n        fabric.Image.fromURL(\"./background_image.png\", function (img) {\r\n            var oImg = img.set({ left: 0, top: 0,opacity: 1, selectable: false});\r\n            blureSection(0,0,oImg)\r\n        }, {\r\n            crossOrigin: 'anonymous'\r\n        });\r\n        return ()=>{\r\n            console.log(\"In useEffect cleanup\")\r\n        }\r\n    },[])\r\n    \r\n    return (\r\n        <div className=\"canvas_wrapper\">\r\n            <div className=\"toolbar\" >\r\n                <ImageUploadComponent></ImageUploadComponent>\r\n                <DownloadImageComponent></DownloadImageComponent>\r\n            </div>\r\n            <div className=\"canvas_editor_wrapper\">\r\n            <canvas id=\"canvas_editor\"></canvas>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default EditorComponent;","  \r\nexport default (state, action) => {\r\n   switch(action.type) {\r\n       case 'CHANGE_IMAGE':\r\n           console.log(action)\r\n        return {\r\n            selectedImage: action.payload\r\n        }\r\n       case 'ADD_ITEM':\r\n           return {\r\n                   shoppingList: [action.payload, ...state.shoppingList]\r\n           }\r\n       case 'REMOVE_ITEM':\r\n           return {\r\n               shoppingList: state.shoppingList.filter(item => item !== action.payload)\r\n           }\r\n       default:\r\n           return state;\r\n   }\r\n}","import React, { createContext, useReducer } from 'react';\r\nimport AppReducer from './AppReducer';\r\n\r\nconst initialState = {\r\n   shoppingList : [],\r\n   selectedImage: undefined\r\n}\r\n\r\nexport const GlobalContext = createContext(initialState);\r\n\r\nexport const GlobalProvider = ({ children }) => {\r\n   const [state, dispatch] = useReducer(AppReducer, initialState);\r\n\r\n   // Actions for changing state\r\n\r\n   function addItemToList(item) {\r\n       dispatch({\r\n           type: 'ADD_ITEM',\r\n           payload: item\r\n       });\r\n   }\r\n   function removeItemFromList(item) {\r\n       dispatch({\r\n           type: 'REMOVE_ITEM',\r\n           payload: item\r\n       });\r\n   }\r\n\r\n   function change_loaded_image(img){\r\n        dispatch({\r\n            type: 'CHANGE_IMAGE',\r\n            payload: img\r\n        });\r\n   }\r\n\r\n   return(\r\n      <GlobalContext.Provider value = {{\r\n        selectedImage : state.selectedImage,  \r\n        shoppingList : state.shoppingList, \r\n      addItemToList, removeItemFromList,change_loaded_image}}> \r\n        {children} \r\n   </GlobalContext.Provider>\r\n   )\r\n}","import './App.css';\r\nimport EditorComponent from './components/EditorComponent';\r\nimport {GlobalProvider} from './components/StateProvider'\r\n\r\nfunction App() {\r\n  return (\r\n       <div className=\"App\">\r\n        <GlobalProvider>\r\n            <EditorComponent/>\r\n        </GlobalProvider>\r\n      </div>\r\n   );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'materialize-css'\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}